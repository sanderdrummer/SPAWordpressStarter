{"version":3,"sources":["webpack:///webpack/bootstrap b4b244720f9431c51c22","webpack:///./src/app.ts","webpack:///./src/router/router.ts","webpack:///./src/router/route.ts","webpack:///./src/components/post/postApi.ts","webpack:///./src/api/config.ts","webpack:///./src/components/post/post.ts","webpack:///./src/components/view.ts","webpack:///./src/components/post/postList.ts","webpack:///./src/api/api.ts","webpack:///./src/components/post/postListTemplate.ts","webpack:///./src/components/homeView.ts","webpack:///./src/components/common/cache.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,EAAC;AACD;AACA;AACA,EAAC;;;;;;;;;;;;;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;ACTA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACrBA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC1BA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;;;;;;;;ACtBA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b4b244720f9431c51c22\n **/","\"use strict\";\r\n// require('../style/main.less');\r\nvar Router = require('./router/router');\r\nvar PostList = require('./components/post/postList');\r\nvar HomeView = require('./components/homeView');\r\nvar postList = new PostList();\r\nvar homeView = new HomeView();\r\nRouter.register('/', 'Home', function (params) {\r\n    homeView.getHome();\r\n    // postList.getPosts();\r\n});\r\nRouter.register('/posts', 'post', function (params) {\r\n    postList.getPosts(params);\r\n});\r\nRouter.register('/post/:id', 'post', function (params) {\r\n    postList.getSinglePost(params);\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app.ts\n ** module id = 0\n ** module chunks = 0\n **/","\"use strict\";\r\nvar _this = this;\r\nvar Route = require('./route');\r\nvar routes = [];\r\nvar findParam = new RegExp(':[a-zA-Z]*');\r\n/**\r\n * Parse hash and url and check for matching\r\n *\r\n * @param  {string}   hash\r\n * @param  {Route}   route\r\n * @return {void}\r\n */\r\nfunction parseRouteUrl(hash, route) {\r\n    var result = getMatchAndParamsOf(hash, route.url);\r\n    if (result.doesMatch) {\r\n        route.callback(result.params);\r\n    }\r\n}\r\n/**\r\n * Checks if route matches hash\r\n * and parses params from hash\r\n *\r\n * @param  {string}   hash\r\n * @param  {string}   url\r\n * @return {Object}\r\n */\r\nfunction getMatchAndParamsOf(hash, url) {\r\n    var urlParts = url.split('/');\r\n    var hashParts = hash.split('/');\r\n    var doesMatch = false;\r\n    var params = {};\r\n    var allMatches = [];\r\n    var key;\r\n    // do both hash and url have the same size ?\r\n    // -> could match  \r\n    if (urlParts.length === hashParts.length) {\r\n        // check all parts of given hash for matching if \r\n        // a part is indentified to be a param it is ignored \r\n        // for matching but saved into params Object\r\n        hashParts.map(function (item, index) {\r\n            if (item === urlParts[index]) {\r\n                allMatches.push(true);\r\n            }\r\n            else if (findParam.test(urlParts[index])) {\r\n                // replace : indicator of param key\r\n                key = urlParts[index].replace(':', '');\r\n                params[key] = item;\r\n            }\r\n            else {\r\n                allMatches.push(false);\r\n            }\r\n        });\r\n        // reduce all matchings to one boolean\r\n        doesMatch = allMatches.reduce(function (a, b) {\r\n            return a && b;\r\n        });\r\n    }\r\n    // return doesMatch flag and parsed params\r\n    return {\r\n        params: params,\r\n        doesMatch: doesMatch\r\n    };\r\n}\r\n/**\r\n */\r\nfunction handleHashChange() {\r\n    var hash = window.location.hash.replace('#', '');\r\n    routes.forEach(function (route) {\r\n        parseRouteUrl(hash, route);\r\n    });\r\n}\r\n// Adds global eventlistener for routing on hashchange\r\nwindow.addEventListener('hashchange', handleHashChange);\r\n// special case for startup\r\ndocument.addEventListener(\"DOMContentLoaded\", handleHashChange);\r\nmodule.exports = {\r\n    register: function (url, title, callback) {\r\n        routes.push(new Route(url, title, callback));\r\n        return _this;\r\n    }\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/router/router.ts\n ** module id = 12\n ** module chunks = 0\n **/","\"use strict\";\r\nvar Route = (function () {\r\n    function Route(url, title, callback) {\r\n        this.url = url;\r\n        this.title = title;\r\n        this.callback = callback;\r\n    }\r\n    return Route;\r\n}());\r\nmodule.exports = Route;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/router/route.ts\n ** module id = 13\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar Api = require('../../api/api');\r\nvar PostApi = (function (_super) {\r\n    __extends(PostApi, _super);\r\n    function PostApi() {\r\n        _super.call(this, 'posts');\r\n    }\r\n    PostApi.prototype.getPosts = function (params) {\r\n        return this.get(params, '');\r\n    };\r\n    return PostApi;\r\n}(Api));\r\nmodule.exports = PostApi;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/post/postApi.ts\n ** module id = 15\n ** module chunks = 0\n **/","\"use strict\";\r\nmodule.exports = {\r\n    BASEURL: 'http://localhost/wordpress/',\r\n    APIURL: 'wp-json/wp/v2/',\r\n    VIEWELEM: 'view'\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/api/config.ts\n ** module id = 16\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar View = require('../view');\r\nvar Post = (function (_super) {\r\n    __extends(Post, _super);\r\n    function Post(config) {\r\n        _super.call(this);\r\n        this.id = config && config.id || '';\r\n        this.title = config && config.title || '';\r\n        this.content = config && config.content || '';\r\n        this.excerpt = config && config.excerpt || '';\r\n    }\r\n    return Post;\r\n}(View));\r\nmodule.exports = Post;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/post/post.ts\n ** module id = 17\n ** module chunks = 0\n **/","\"use strict\";\r\nvar Config = require('../api/config');\r\nvar View = (function () {\r\n    function View() {\r\n        this.viewElem = document.getElementById(Config.VIEWELEM);\r\n    }\r\n    View.prototype.render = function (config) {\r\n        config.template = config.template || '';\r\n        config.append = config.append || false;\r\n        if (config.append) {\r\n            this.viewElem.innerHTML += config.template;\r\n        }\r\n        else {\r\n            this.viewElem.innerHTML = config.template;\r\n        }\r\n    };\r\n    View.prototype.getHeight = function () {\r\n        return this.viewElem.getBoundingClientRect().height;\r\n    };\r\n    return View;\r\n}());\r\nmodule.exports = View;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/view.ts\n ** module id = 18\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar PostApi = require('./postApi');\r\nvar Post = require('./post');\r\nvar View = require('../view');\r\nvar template = require('./postListTemplate');\r\nvar cache = require('../common/cache');\r\nvar PostList = (function (_super) {\r\n    __extends(PostList, _super);\r\n    function PostList() {\r\n        var _this = this;\r\n        _super.call(this);\r\n        this.page = 1;\r\n        this.append = false;\r\n        this.template = '';\r\n        this.posts = [];\r\n        this.api = new PostApi();\r\n        this.notDone = true;\r\n        document.addEventListener('scroll', function () {\r\n            if (_this.notDone &&\r\n                _this.viewHeight / 2 < window.pageYOffset) {\r\n                _this.appendOnScroll();\r\n            }\r\n        });\r\n    }\r\n    PostList.prototype.getPosts = function (params) {\r\n        var _this = this;\r\n        // check if posts are already in cache\r\n        if (cache.postList && !this.notDone) {\r\n            this.render({\r\n                template: cache.postList\r\n            });\r\n        }\r\n        else {\r\n            // extend params\r\n            params = params || {};\r\n            params.page = params.page || 1;\r\n            // fetch posts by api\r\n            this.api.getPosts(params)\r\n                .then(function (res) {\r\n                return res.json();\r\n            })\r\n                .then(function (res) {\r\n                var config;\r\n                if (res.length) {\r\n                    _this.createPostList(res);\r\n                    _this.compose();\r\n                    config = {\r\n                        template: _this.template,\r\n                        append: params.page > 1\r\n                    };\r\n                    _this.render(config);\r\n                    _this.setCache(config);\r\n                    _this.viewHeight = _this.getHeight();\r\n                }\r\n                else {\r\n                    _this.notDone = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    PostList.prototype.createPostList = function (rawPosts) {\r\n        var index = 0;\r\n        var length = rawPosts.length;\r\n        var rawPost;\r\n        this.posts = [];\r\n        while (index < length) {\r\n            rawPost = rawPosts[index];\r\n            if (rawPost) {\r\n                this.posts[rawPost.id] = new Post({\r\n                    id: rawPost.id,\r\n                    title: rawPost.title.rendered,\r\n                    content: rawPost.content.rendered,\r\n                    excerpt: rawPost.excerpt.rendered\r\n                });\r\n            }\r\n            index += 1;\r\n        }\r\n    };\r\n    PostList.prototype.compose = function () {\r\n        this.template = this.posts.map(function (post) {\r\n            return template(post);\r\n        }).join('');\r\n    };\r\n    PostList.prototype.appendOnScroll = function () {\r\n        this.page += 1;\r\n        this.getPosts({ page: this.page });\r\n    };\r\n    PostList.prototype.setCache = function (config) {\r\n        // extend cache\r\n        if (config.template != 'false') {\r\n            cache.postList += config.template;\r\n        }\r\n        else if (config.append && config.template != 'false') {\r\n            cache.postList = config.template;\r\n        }\r\n    };\r\n    PostList.prototype.getSinglePost = function (params) {\r\n        console.log(params, this.posts);\r\n        var post = this.posts[params.id];\r\n        post.render({\r\n            template: template(post)\r\n        });\r\n    };\r\n    return PostList;\r\n}(View));\r\nmodule.exports = PostList;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/post/postList.ts\n ** module id = 19\n ** module chunks = 0\n **/","\"use strict\";\r\nvar ApiConfig = require('./config');\r\nvar Api = (function () {\r\n    function Api(type) {\r\n        this.baseUrl = ApiConfig.APIURL + type;\r\n    }\r\n    Api.prototype.get = function (params, url) {\r\n        url = url || this.baseUrl;\r\n        url = this.addParams(params);\r\n        return fetch(url);\r\n    };\r\n    Api.prototype.addParams = function (params) {\r\n        var url = this.baseUrl;\r\n        var seperator = '?';\r\n        var key;\r\n        for (key in params) {\r\n            if (key && params[key]) {\r\n                url += seperator + key +\r\n                    '=' + params[key];\r\n                seperator = '&';\r\n            }\r\n        }\r\n        return url;\r\n    };\r\n    return Api;\r\n}());\r\nmodule.exports = Api;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/api/api.ts\n ** module id = 20\n ** module chunks = 0\n **/","\"use strict\";\r\nmodule.exports = function applyTemplate(post) {\r\n    var template = \"\\n\\t<div id=\\\"post_\" + post.id + \"\\\">\\n\\t\\t<div class=\\\"grid center\\\">\\n\\t\\t\\t<div class=\\\"col-5\\\"><a href=\\\"#/post/\" + post.id + \"\\\">\" + post.title + \"</a> </div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"grid center\\\">\\n\\t\\t\\t<div class=\\\"col-5\\\">\" + post.excerpt + \"</div>\\n\\t\\t\\t<div class=\\\"col-5 hidden\\\">\" + post.content + \"</div>\\n\\t\\t</div>\\n\\t</div>\\n\\t\";\r\n    return template;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/post/postListTemplate.ts\n ** module id = 21\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar View = require('./view');\r\nvar template = \"\\n\\t<div class=\\\"center container grid\\\">\\n\\t\\t<h1>Home View</h1>\\n\\t\\t<p> Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolores sed illo corporis deserunt iure tempore! Aut ut totam facere maiores eaque beatae autem error reiciendis vitae. Atque quas illum asperiores.</p>\\n\\t</div>\\n\";\r\nvar HomeView = (function (_super) {\r\n    __extends(HomeView, _super);\r\n    function HomeView() {\r\n        _super.call(this);\r\n        this.template = template;\r\n    }\r\n    HomeView.prototype.getHome = function () {\r\n        this.render({\r\n            template: this.template,\r\n            append: false\r\n        });\r\n    };\r\n    return HomeView;\r\n}(View));\r\nmodule.exports = HomeView;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/homeView.ts\n ** module id = 22\n ** module chunks = 0\n **/","\"use strict\";\r\nmodule.exports = {\r\n    postList: ''\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/common/cache.ts\n ** module id = 24\n ** module chunks = 0\n **/"],"sourceRoot":""}